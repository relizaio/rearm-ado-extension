{
    "$schema": "https://raw.githubusercontent.com/Microsoft/azure-pipelines-task-lib/master/tasks.schema.json",
    "id": "82520d21-710e-446d-8838-23c0524ee5f0",
    "name": "RearmReleaseFinalize",
    "friendlyName": "ReARM Release Finalize",
    "description": "Finalizes a release in ReARM with deliverable metadata, artifacts, and runs the release finalizer",
    "helpMarkDown": "[Learn more about this task](https://github.com/relizaio/rearm-ado-extension)",
    "category": "Utility",
    "author": "Reliza Incorporated",
    "version": {
        "Major": 0,
        "Minor": 4,
        "Patch": 7
    },
    "instanceNameFormat": "Finalize Release with ReARM",
    "inputs": [
        {
            "name": "rearmApiKey",
            "type": "string",
            "label": "ReARM API Key",
            "required": true,
            "helpMarkDown": "API Key for ReARM authentication"
        },
        {
            "name": "rearmApiKeyId",
            "type": "string",
            "label": "ReARM API Key ID",
            "required": true,
            "helpMarkDown": "API Key ID for ReARM authentication"
        },
        {
            "name": "rearmUrl",
            "type": "string",
            "label": "ReARM URL",
            "required": true,
            "helpMarkDown": "ReARM server URL"
        },
        {
            "name": "repoPath",
            "type": "string",
            "label": "Repository Path",
            "defaultValue": ".",
            "required": false,
            "helpMarkDown": "Path to the repository (default: current directory)"
        },
        {
            "name": "lifecycle",
            "type": "pickList",
            "label": "Lifecycle",
            "defaultValue": "ASSEMBLED",
            "required": false,
            "helpMarkDown": "Release lifecycle status",
            "options": {
                "ASSEMBLED": "ASSEMBLED",
                "DRAFT": "DRAFT",
                "REJECTED": "REJECTED"
            }
        },
        {
            "name": "odelId",
            "type": "string",
            "label": "Deliverable ID",
            "required": false,
            "helpMarkDown": "Output deliverable identifier (e.g., container image name)"
        },
        {
            "name": "odelType",
            "type": "pickList",
            "label": "Deliverable Type",
            "required": false,
            "helpMarkDown": "Type of the deliverable",
            "options": {
                "CONTAINER": "Container",
                "APPLICATION": "Application",
                "LIBRARY": "Library",
                "FILE": "File",
                "FRAMEWORK": "Framework",
                "PLATFORM": "Platform"
            }
        },
        {
            "name": "odelDigests",
            "type": "string",
            "label": "Deliverable Digests",
            "required": false,
            "helpMarkDown": "Deliverable digests (e.g., sha256:abc123). Multiple digests comma-separated."
        },
        {
            "name": "odelPurl",
            "type": "string",
            "label": "Deliverable PURL",
            "required": false,
            "helpMarkDown": "Package URL (PURL) for the deliverable"
        },
        {
            "name": "odelBuildId",
            "type": "string",
            "label": "Deliverable Build ID",
            "required": false,
            "helpMarkDown": "Build ID for the deliverable (defaults to Azure DevOps build number)"
        },
        {
            "name": "odelBuildUri",
            "type": "string",
            "label": "Deliverable Build URI",
            "required": false,
            "helpMarkDown": "URI of the build (defaults to Azure DevOps build URI)"
        },
        {
            "name": "odelCiMeta",
            "type": "string",
            "label": "CI Metadata",
            "defaultValue": "azuredevops",
            "required": false,
            "helpMarkDown": "CI system metadata"
        },
        {
            "name": "odelArtsJson",
            "type": "string",
            "label": "Deliverable Artifacts JSON",
            "required": false,
            "helpMarkDown": "JSON array of deliverable artifacts (SBOMs, attestations, etc.)"
        },
        {
            "name": "sceArts",
            "type": "string",
            "label": "Source Code Entry Artifacts JSON",
            "required": false,
            "helpMarkDown": "JSON array of source code entry artifacts"
        },
        {
            "name": "releaseArts",
            "type": "string",
            "label": "Release Artifacts JSON",
            "required": false,
            "helpMarkDown": "JSON array of release artifacts (release notes, security reports, etc.)"
        },
        {
            "name": "runOnCondition",
            "type": "boolean",
            "label": "Run Only If DO_BUILD is True",
            "defaultValue": "true",
            "required": false,
            "helpMarkDown": "Only run if DO_BUILD variable is 'true'"
        }
    ],
    "execution": {
        "Node16": {
            "target": "index.js"
        },
        "Node20_1": {
            "target": "index.js"
        }
    }
}
