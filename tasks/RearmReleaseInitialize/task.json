{
    "$schema": "https://raw.githubusercontent.com/Microsoft/azure-pipelines-task-lib/master/tasks.schema.json",
    "id": "a2dcce4a-0a30-4743-848f-f41aad705e3a",
    "name": "RearmReleaseInitialize",
    "friendlyName": "ReARM Release Initialize",
    "description": "Synchronizes branches, checks for changes, and initializes a pending release with ReARM",
    "helpMarkDown": "[Learn more about this task](https://github.com/relizaio/rearm-ado-extension)",
    "category": "Utility",
    "author": "Reliza Incorporated",
    "version": {
        "Major": 0,
        "Minor": 4,
        "Patch": 3
    },
    "instanceNameFormat": "Initialize Release with ReARM",
    "inputs": [
        {
            "name": "rearmApiKey",
            "type": "string",
            "label": "ReARM API Key",
            "required": true,
            "helpMarkDown": "API Key for ReARM authentication"
        },
        {
            "name": "rearmApiKeyId",
            "type": "string",
            "label": "ReARM API Key ID",
            "required": true,
            "helpMarkDown": "API Key ID for ReARM authentication"
        },
        {
            "name": "rearmUrl",
            "type": "string",
            "label": "ReARM URL",
            "required": true,
            "helpMarkDown": "ReARM server URL"
        },
        {
            "name": "repoPath",
            "type": "string",
            "label": "Repository Path",
            "defaultValue": ".",
            "required": false,
            "helpMarkDown": "Path to the repository (default: current directory)"
        },
        {
            "name": "branch",
            "type": "string",
            "label": "Branch",
            "required": false,
            "helpMarkDown": "Branch name (defaults to current branch from Build.SourceBranchName)"
        },
        {
            "name": "version",
            "type": "string",
            "label": "Version",
            "required": false,
            "helpMarkDown": "Version string for the release. If not provided, version will be obtained from ReARM using getversion command."
        }
    ],
    "outputVariables": [
        {
            "name": "DoBuild",
            "description": "Whether a build should be performed (true/false)"
        },
        {
            "name": "LastCommit",
            "description": "The last commit from the previous release"
        },
        {
            "name": "RearmFullVersion",
            "description": "Full version string from ReARM"
        },
        {
            "name": "RearmShortVersion",
            "description": "Docker-tag-safe version string from ReARM"
        }
    ],
    "execution": {
        "Node16": {
            "target": "index.js"
        },
        "Node20_1": {
            "target": "index.js"
        }
    }
}
